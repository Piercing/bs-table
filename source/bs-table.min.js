"use strict";angular.module("bsTable",[]).directive("bsTable",function(){return{restrict:"A",scope:!0,compile:function(n){var u=0,i=n.find("tbody").first(),t=i.find("tr").first(),r=t.attr("ng-repeat")!==undefined?t.attr("ng-repeat"):i.attr("ng-repeat"),f=" | bsTableSkip:bsTablePagination.skipAt | limitTo:bsTablePagination.pageSize",e;return t.attr("ng-repeat")!==undefined?t.attr("ng-repeat",r+f):i.attr("ng-repeat",r+f),u=t.children("td").size(),e='<tfoot><tr><td colspan="'+u+'"><ul class="pagination"><\/ul><select ng-model="bsTablePagination.pageSize" class="form-control select-page-size"><option value="5" selected="selected">5<\/option><option value="10">10<\/option><option value="20">20<\/option><option value="40">40<\/option><\/select><\/td><\/tr><\/tfoot>',n.append(e),{pre:function(n,t){var i=n.bsTablePagination={},s=t.children("tfoot").children("tr").children("td"),f=r.match(/^\s*(.+)\s+in\s+(.*)\s*$/)[2],h=n.$eval(f),u=h.length,e,o;n.$watchCollection(f,function(){u=n.$eval(f).length;i.lastPage=Math.ceil(u/i.pageSize);e()});n.$watch("bsTablePagination.pageSize",function(){e()});i.pageSize=5;i.lastPage=Math.ceil(u/i.pageSize);i.page=1;i.skipAt=(i.page-1)*i.pageSize;s.children(".select-page-size").change(function(){var t=parseInt($(this).val());i.lastPage=Math.ceil(u/t);i.page=1;i.skipAt=(i.page-1)*t;n.$digest()});e=function(){for(var f="",r=0;r<Math.ceil(u/n.bsTablePagination.pageSize);r++)f+="<li "+(i.page==r+1?'class="active"':"")+'><a ng-href="#">'+(r+1)+"<\/a><\/li>";t.find(".pagination").html(f);t.find(".pagination").find("li").bind("click",o)};o=function(){var t=parseInt($(this).find("a").text());$(this).parent().find("li").removeClass("active");$(this).addClass("active");i.page=t;i.skipAt=(i.page-1)*i.pageSize;n.$digest()}}}}}}).filter("bsTableSkip",function(){return function(n,t){return n.slice(t)}});
