"use strict";angular.module("bsTable",[]).directive("bsTable",function(){return{restrict:"A",scope:!0,compile:function(n){var u=angular.element("<thead><tr><\/tr><\/thead>"),t=u.children("tr"),i=0,r=n.children("tbody").children("tr"),f=r.attr("ng-repeat"),e;return r.attr("ng-repeat",f+" | bsTableSkip:bsTableSortPagination.skipAt | orderBy:bsTableSortPagination.predicate:bsTableSortPagination.reverse | limitTo:bsTableSortPagination.pageSize"),angular.forEach(r.children("td"),function(n){var u=angular.element(n),s=u.attr("data-type"),f=u.attr("data-title"),r=u.attr("data-header-click");if(s=="command"){t.append("<th "+(r!=""&&r!==undefined?'ng-click="'+r+'"':"")+">"+f+"<\/th>");i+=1;return}var h=u.html(),e=h.replace(/[{}\s]/g,""),c=e.split(/\.(.+)?/)[1].split(/\|/)[0],o=e.split(/\.(.+)?/)[1].split(/\|/)[1],l=o?'filter="'+o+'"':"";t.append("<th "+(r!=""&&r!==undefined?'ng-click="'+r+'"':"")+' name="'+c+'" '+l+">"+f+'<span style="padding-left: 4px;"><\/span><\/th>');u.removeAttr("data-title");i+=1}),n.prepend(u),e='<tfoot><tr><td colspan="'+i+'"><ul class="pagination"><\/ul><select ng-model="bsTableSortPagination.pageSize" class="form-control select-page-size"><option value="5" selected="selected">5<\/option><option value="10">10<\/option><option value="20">20<\/option><option value="40">40<\/option><\/select><\/td><\/tr><\/tfoot>',n.append(e),{pre:function(n,i){var r=n.bsTableSortPagination={},s=i.children("tfoot").children("tr").children("td"),e=f.match(/^\s*(.+)\s+in\s+(.*)\s*$/)[2],h=n.$eval(e),u=h.length;n.$watchCollection(e,function(){u=n.$eval(e).length;r.lastPage=Math.ceil(u/r.pageSize);o()});n.$watch("bsTableSortPagination.pageSize",function(){o()});r.pageSize=5;r.lastPage=Math.ceil(u/r.pageSize);r.page=1;r.skipAt=(r.page-1)*r.pageSize;s.children(".select-page-size").change(function(){var t=parseInt($(this).val());r.lastPage=Math.ceil(u/t);r.page=1;r.skipAt=(r.page-1)*t;n.$digest()});var o=function(){for(var f="",t=0;t<Math.ceil(u/n.bsTableSortPagination.pageSize);t++)f+="<li "+(r.page==t+1?'class="active"':"")+'><a ng-href="#">'+(t+1)+"<\/a><\/li>";i.find(".pagination").html(f);i.find(".pagination").find("li").bind("click",c)},c=function(){var t=parseInt($(this).find("a").text());$(this).parent().find("li").removeClass("active");$(this).addClass("active");r.page=t;r.skipAt=(r.page-1)*r.pageSize;n.$digest()},l=function(){var i=$(this).children("span");r.predicate=$(this).attr("name");r.reverse=!1;i.hasClass("glyphicon glyphicon-chevron-up")||i.hasClass("glyphicon glyphicon-chevron-down")?(r.reverse=i.hasClass("glyphicon glyphicon-chevron-up")?!0:!1,i.toggleClass("glyphicon glyphicon-chevron-up"),i.toggleClass("glyphicon glyphicon-chevron-down")):(t.children("th").children("span").removeClass("glyphicon glyphicon-chevron-up glyphicon glyphicon-chevron-down"),i.addClass("glyphicon glyphicon-chevron-up"),r.reverse=!1);n.$digest()},a=i.children("thead").children("tr").children("th");angular.forEach(a,function(n){$(n).click(l)})}}}}}).filter("bsTableSkip",function(){return function(n,t){return n.slice(t)}});