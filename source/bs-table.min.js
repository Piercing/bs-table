"use strict";angular.module("bsTable",[]).directive("bsTable",function(){return{restrict:"A",scope:!0,compile:function(e){var t=0,a=e.find("tbody").find("tr"),i=a.attr("ng-repeat");a.attr("ng-repeat",i+" | bsTableSkip:bsTablePagination.skipAt | limitTo:bsTablePagination.pageSize"),t=a.children("td").size();var n='<tfoot><tr><td colspan="'+t+'"><ul class="pagination"></ul><select ng-model="bsTablePagination.pageSize" class="form-control select-page-size"><option value="5" selected="selected">5</option><option value="10">10</option><option value="20">20</option><option value="40">40</option></select></td></tr></tfoot>';return e.append(n),{pre:function(e,t){var a=e.bsTablePagination={},n=t.children("tfoot").children("tr").children("td"),l=i.match(/^\s*(.+)\s+in\s+(.*)\s*$/)[2],o=e.$eval(l),s=o.length;e.$watchCollection(l,function(){s=e.$eval(l).length,a.lastPage=Math.ceil(s/a.pageSize),c()}),e.$watch("bsTablePagination.pageSize",function(){c()}),a.pageSize=5,a.lastPage=Math.ceil(s/a.pageSize),a.page=1,a.skipAt=(a.page-1)*a.pageSize,n.children(".select-page-size").change(function(){var t=parseInt($(this).val());a.lastPage=Math.ceil(s/t),a.page=1,a.skipAt=(a.page-1)*t,e.$digest()});var c=function(){for(var i="",n=0;n<Math.ceil(s/e.bsTablePagination.pageSize);n++){i+="<li "+(a.page==n+1?'class="active"':"")+'><a ng-href="#">'+(n+1)+"</a></li>"}t.find(".pagination").html(i),t.find(".pagination").find("li").bind("click",p)},p=function(){var t=parseInt($(this).find("a").text());$(this).parent().find("li").removeClass("active"),$(this).addClass("active"),a.page=t,a.skipAt=(a.page-1)*a.pageSize,e.$digest()}}}}}}).filter("bsTableSkip",function(){return function(e,t){return e.slice(t)}});
